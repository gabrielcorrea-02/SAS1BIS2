<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Usu�rios - 1�BIS(AMV)</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800 font-sans">

  <!-- Header -->
  <%- include('partials/header') %>

  <!-- Sidebar -->
  <%- include('partials/sidebar', { user: user, page: 'users' }) %>

  <!-- Conteudo principal -->
  <main class="ml-64 p-6">

    <!-- Novo Usu�rio -->
    <section class="bg-white shadow-lg rounded-xl p-6 mb-8">
      <h2 class="text-xl font-bold mb-4">Novo Usuario</h2>
      <form method="POST" action="/admin/users/add" class="grid gap-4 md:grid-cols-2">
        <input type="text" name="username" placeholder="Usuario" required
               class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-600">
        <input type="password" name="password" placeholder="Senha" required
               class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-600">
        <select name="role"
                class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-600 md:col-span-2">
                <option value="admin">Administrador</option>
          <option value="em">Estado-Maior</option>
          <option value="rp">RelaçõesPublicas</option>
          <option value="gda">Guarda</option>
        </select>
        <button type="submit" 
                class="bg-green-700 text-white font-semibold py-3 rounded-lg hover:bg-green-800 transition md:col-span-2">
          Adicionar
        </button>
      </form>
    </section>

    <!-- Lista de Usu�rios -->
    <section class="bg-white shadow-lg rounded-xl p-6">
      <h2 class="text-xl font-bold mb-4">Lista de Usu�rios</h2>
      <div class="overflow-x-auto">
        <table class="min-w-full border border-gray-300">
          <thead class="bg-green-600 text-white">
            <tr>
              <th class="px-4 py-2">ID</th>
              <th class="px-4 py-2">Usu�rio</th>
              <th class="px-4 py-2">Permiss�o</th>
              <th class="px-4 py-2">A��o</th>
            </tr>
          </thead>
          <tbody>
            <% users.forEach(u => { %>
              <tr class="border-t hover:bg-gray-50">
                <td class="px-4 py-2"><%= u.id %></td>
                <td class="px-4 py-2"><%= u.username %></td>
                <td class="px-4 py-2 capitalize"><%= u.role %></td>
                <td class="px-4 py-2 text-center">
                  <a href="/admin/users/delete/<%= u.id %>" 
                     class="bg-red-600 text-white px-3 py-1 rounded-lg hover:bg-red-700 transition">
                    Excluir
                  </a>
                </td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
    </section>

  </main>

  <!-- Footer -->
 <footer class="bg-green-800 text-white text-center p-3 mt-6">
    Feito por Cb Gabriel - STI 1°BIS(AMV)
  </footer>

  <%- include('partials/footer') %>

</body>
</html>
