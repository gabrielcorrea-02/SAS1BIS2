<%- include('partials/head', { title: 'Usuários - 1°BIS(AMV)' })%>

<body class="bg-gray-100 text-gray-800 font-sans">

<%- include('partials/header') %>
<div class="flex">
  <!-- Sidebar -->
<%- include('partials/sidebar') %>

  <!-- Main content -->
  <main class="flex-1 p-6">
    <h1 class="text-2xl font-bold mb-6">Administracao de Usuarios</h1>

    <!-- Formul�rio de novo usu�rio -->
    <section class="bg-white shadow-lg rounded-xl p-6 mb-8">
      <form method="POST" action="/admin/users/add" class="grid gap-4 md:grid-cols-2">
        <input type="text" name="username" placeholder="Usuario" required
               class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-600">
        <input type="password" name="password" placeholder="Senha" required
               class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-600">
        <select name="role" class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-600 md:col-span-2">
          <option value="admin">Administrador</option>
          <option value="em">Estado Maior</option>
          <option value="gda">Guarda</option>
          <option value="rp">Relacoes Publicas</option>
        </select>
        <button type="submit"
                class="bg-green-700 text-white font-semibold py-3 rounded-lg hover:bg-green-800 transition md:col-span-2">
          Adicionar
        </button>
      </form>
    </section>

    <!-- Lista de usu�rios -->
    <section class="bg-white shadow-lg rounded-xl p-6">
      <h2 class="text-xl font-bold mb-4">Lista de Usuarios</h2>
      <div class="overflow-x-auto">
        <table class="w-full border-collapse">
          <thead>
            <tr class="bg-green-700 text-white">
              <th class="p-3 text-left">ID</th>
              <th class="p-3 text-left">Usuario</th>
              <th class="p-3 text-left">Permissao</th>
              <th class="p-3 text-center">Acao</th>
            </tr>
          </thead>
          <tbody>
            <% users.forEach(u => { %>
              <tr class="border-b hover:bg-gray-50">
                <td class="p-3"><%= u.id %></td>
                <td class="p-3"><%= u.username %></td>
                <td class="p-3 capitalize"><%= u.role %></td>
                <td class="p-3 text-center">
                  <a href="/admin/users/delete/<%= u.id %>"
                     class="bg-red-600 text-white px-3 py-1 rounded-lg hover:bg-red-700 transition">
                    Excluir
                  </a>
                </td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
    </section>
  </main>
</div>

 <!-- Footer -->
  <%- include('partials/footer') %>


</body>
</html>
